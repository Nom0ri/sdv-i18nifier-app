import{P as T}from"./PageLayout-34dd41b9.js";import{_ as k,r as D,o as w,g as E}from"./404-912853ea.js";const V={components:{PageLayout:T},data(){return{inputText:"",i18nText:""}},watch:{inputText:{handler(e){this.processData(e)}}},methods:{checkInput(e){const t=e.match(/"([^"]+)":\s*{[^}]*}|"(AllowValues|Description|Default|Section)":\s*"[^"]*"/g);return!t||t.length===0?(this.i18nText="Invalid format. Expected ConfigSchema structure.",!1):!0},processData(e){let t=this.inputText;if(t=t.replace(/"ConfigSchema":\s*{/,""),!this.checkInput(t))return;const l=t.match(/"(.*?[^\\])":\s*{[^}]*}|"(?:AllowValues|Description|Default|Section)":\s*"[^"]*"/g);let o="",c=e,n="",r=new Set,i="";l&&l.forEach(u=>{const g=u.match(/"((?:\\.|[^"\\])*)":\s*{/);if(g){n=g[1];const s=`config.${n}.name`;o+=`"${s}": "${n}",
`}const h=u.match(/"Description":\s*"(.*?[^\\])"/),m=u.match(/"AllowValues":\s*(['"])((?:\\.|[^"\\])*?)\1/),$=u.match(/"Section":\s*"(.*?[^\\])"/);if(h){const s=`config.${n}.description`,p=h[1];o+=`"${s}": "${p}",
`}if(m){const s=m[2].split(",").map(a=>a.trim()),p=s.map(a=>a.toLowerCase()),d=s.filter(a=>!isNaN(a));!(p.length===2&&p.includes("true")&&p.includes("false"))&&d.length!==s.length&&s.forEach(a=>{if(isNaN(a)){const x=`config.${n}.values.${a}`;o+=`"${x}": "${a}",
`}})}if($){const s=$[1];if(!r.has(s)){const p=`config.section.${s}.name`,d=`config.section.${s}.description`;i+=`"${p}": "${s}",
`,i+=`"${d}": "",
`,r.add(s)}}o+=`
`,c=this.replaceWithI18nTokens(c,n,h,m)}),this.i18nText=o.trim(),i&&(this.i18nText+=`

${i.trim()}`)},replaceWithI18nTokens(e,t,f,l){const o=new RegExp(`"${t}"`);if(e=e.replace(o,`"{{i18n:config.${t}.name}}"`),f){const c=f[1],n=this.escapeRegExp(c),r=new RegExp(`"Description":\\s*"${n}"`);e=e.replace(r,`"Description": "{{i18n:config.${t}.description}}"`)}if(l){const c=l[1].split(",").map(i=>i.trim()),n=c.map(i=>i.toLowerCase()),r=c.filter(i=>!isNaN(i));!(n.length===2&&n.includes("true")&&n.includes("false"))&&r.length!==c.length&&c.forEach(i=>{if(isNaN(i)){const u=this.escapeRegExp(i),g=new RegExp(`"${u}"`);e=e.replace(g,`"{{i18n:config.${t}.values.${i}}}"`)}})}return e},escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}};function N(e,t,f,l,o,c){const n=D("PageLayout");return w(),E(n,{title:"Config",isConfigPage:!0,inputText:o.inputText,i18nText:o.i18nText,"onUpdate:inputText":t[0]||(t[0]=r=>o.inputText=r)},null,8,["inputText","i18nText"])}const C=k(V,[["render",N]]);export{C as default};

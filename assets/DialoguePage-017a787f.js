import{_ as m,o as f,c as x,b as c,w as p,v as h}from"./index-740167eb.js";const g={data(){return{inputText:"",contentText:"",i18nText:"",customPrefix:"",separator:""}},methods:{async checkInput(n){const e=/\|inputSeparator/g,s=n.match(e),a=s?s.length:0;return console.log("Check: ",a),a>1?(console.log("Input only one line of random dialogue"),!1):!0},async cutString(n){const e=/\|inputSeparator=(..)/,s=n.match(e);return s?(this.separator=s[1],console.log("Separator:",this.separator),await this.cutStringWithSeparator(n)):(console.log("No Separator Found"),await this.cutStringWithoutSeparator(n))},async cutStringWithSeparator(n){const s=/"(.*?)"/g.exec(n);if(!s)return console.error("Token not found."),{cuts:[],separatorMatch:!0};const a=s[1];console.log("Token: ",a);const o=new RegExp(`(?:Random: ?|${this.separator}|inputSeparator=${this.separator})(.*?)(?=(?:${this.separator}|\\||$))`,"g"),r=[];let t;for(;(t=o.exec(n))!==null;)r.push(t[1]);console.log("Matches: ",r);const i=r.map(l=>{const u=l.split(this.separator).map(d=>d.trim());return console.log("Random Items:",u),{token:a,randomItems:u}});return console.log("Cuts:",i),{cuts:i,separatorMatch:!0}},async cutStringWithoutSeparator(n){const e=/"([^"]+)":\s*"([^"]+)"/g,s=n.matchAll(e),a=[];for(const o of s){const r=o[1],t=o[2];a.push({token:r,dialogue:t})}return console.log("Cuts:",a),{cuts:a,separatorMatch:!1}},async processDataWithoutSeparator(n){let e="",s="";for(const a of n){const{token:o,dialogue:r}=a,t=this.customPrefix?`${this.customPrefix}.`:"";e+=`"${o}": "{{i18n:${t}${o}}}",
`,s+=`"${t}${o}": "${r}",
`}this.contentText=e,this.i18nText=s},async processDataWithSeparator(n){let e="",s="",a={},o="";for(const r of n)if(r.randomItems){const{token:t,randomItems:i}=r,l=this.customPrefix?`${this.customPrefix}.`:"";if(Array.isArray(i)&&i.length>0){a[t]||(a[t]=0);const u=a[t]++,d=i.length-1?` ${this.separator} `:"";console.log("itemSeparator: ",d),o+=`{{i18n:${l}${t}.${u}}} ${this.separator} `,console.log("Random Group: ",o),console.log("Random Items: ",i),s+=`"${l}${t}.${u}": "${i[0].trim()}",
`}else console.error(`Random items not found for token "${t}"`)}else{const{token:t,dialogue:i}=r,l=this.customPrefix?`${this.customPrefix}.`:"";e+=`"${t}": "{{i18n:${l}${t}}}",
`,s+=`"${l}${t}": "${i}",
`,o&&(e+=`"${t}": "{{Random: ${o}}},
`,o="")}o&&(e+=`"${n[n.length-1].token}": "{{Random: ${o}}},
`,e=e.slice(0,-7)+`|inputSeparator=${this.separator}}},`),this.contentText=e,this.i18nText=s},async processData(){const n=this.inputText;if(!await this.checkInput(n)){this.contentText="",this.i18nText="";return}const{cuts:s,separatorMatch:a}=await this.cutString(n);a?await this.processDataWithSeparator(s):await this.processDataWithoutSeparator(s)}}},$={class:"input-page"},k={class:"input-containers-wrapper"},S={class:"input-container left"},T={class:"input-container right"},R={class:"button-container"};function w(n,e,s,a,o,r){return f(),x("div",$,[c("div",k,[c("div",S,[p(c("textarea",{class:"input-field",placeholder:"Raw data",id:"raw-data","onUpdate:modelValue":e[0]||(e[0]=t=>o.inputText=t)},null,512),[[h,o.inputText]]),p(c("input",{class:"prefix-field",type:"text",placeholder:"Custom Prefix","onUpdate:modelValue":e[1]||(e[1]=t=>o.customPrefix=t)},null,512),[[h,o.customPrefix]])]),c("div",T,[p(c("textarea",{class:"input-field",placeholder:"Content.json",id:"content-field",readonly:"","onUpdate:modelValue":e[2]||(e[2]=t=>o.contentText=t)},null,512),[[h,o.contentText]]),p(c("textarea",{class:"input-field",placeholder:"i18n",id:"i18n-field",readonly:"","onUpdate:modelValue":e[3]||(e[3]=t=>o.i18nText=t)},null,512),[[h,o.i18nText]])])]),c("div",R,[c("button",{class:"process-button",onClick:e[4]||(e[4]=(...t)=>r.processData&&r.processData(...t))},"Process Data")])])}const I=m(g,[["render",w]]);export{I as default};

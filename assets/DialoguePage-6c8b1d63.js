import{_ as x,o as f,c as g,a as r,d as p,v as h}from"./index-abb98b04.js";import{_ as m}from"./copy-icon-286decec.js";const $={data(){return{inputText:"",contentText:"",i18nText:"",customPrefix:"",separator:""}},watch:{inputText:{handler(o){this.processData(o)}},customPrefix:{handler(){this.processData(this.inputText)}}},methods:{checkInput(o){const t=/\|inputSeparator/g,s=(o.match(t)||[]).length,i=/"(.*?)":/g,e=(o.match(i)||[]).length,a=/\[\#\][^\"]/g,n=(o.match(a)||[]).length;return s>1?(this.contentText="Input only one line of random dialogue.",this.i18nText="Maybe I'll add the ability to convert more at once later.",!1):s===1&&e>1?(this.contentText="Don't mix random and regular dialogue.",this.i18nText="Maybe I'll add the ability to convert more at once later.",!1):n!==0&&n<e?(this.contentText=`It seems some mails are missing titles, they are optional, but it's still nice to have them.

 Add this to the end of the entry: [#]title`,this.i18nText="I'm not just saying it, because I can't find a way to distinguish mails from dialogues without it... definitely not.",!1):!0},cutString(o){const t=/\|inputSeparator=(..)/,s=o.match(t),i=/(?:\[\#\])(.*?)(?=\")/g,e=o.match(i);return s?(this.separator=s[1],this.cutStringWithSeparator(o)):e?this.cutMail(o):this.cutStringWithoutSeparator(o)},cutStringWithSeparator(o){const t=/"(.*?)"/g,[,s]=t.exec(o)||[];if(!s)return console.error("Token not found."),{cuts:[],separatorMatch:!0};const i=new RegExp(`(?:Random: ?|${this.separator}|inputSeparator=${this.separator})(.*?)(?=(?:${this.separator}|\\||$))`,"g"),e=[];let a;for(;(a=i.exec(o))!==null;)e.push(a[1]);return{cuts:e.map(l=>{const u=l.split(this.separator).map(c=>c.trim());return{token:s,randomItems:u}}),separatorMatch:!0}},cutStringWithoutSeparator(o){const t=/"((?:\\.|[^"\\])*)":\s*"((?:\\.|[^"\\])*)"/g,s=[];let i;for(;(i=t.exec(o))!==null;){const[,e,a]=i,n=e.replace(/\\(")/g,'\\"'),l=a.replace(/\\(")/g,'\\"');s.push({token:n,dialogue:l})}return{cuts:s,separatorMatch:!1}},cutMail(o){const t=new RegExp('"(.*?)(?<!\\\\)": "(.*?(?<!\\\\))(?="|%|\\[#]|$)',"g"),s=/(?:\[\#\])(.*?)(?=\")/g,i=[];let e,a={};for(;(e=t.exec(o))!==null;){const n=e[1],l=e[2].trim(),u=s.exec(o);if(u!==null){const c=u[1];a={mailToken:n,mailText:l,mailTitle:c},i.push(a)}}return{cuts:i,mailMatch:!0}},processDataWithoutSeparator(o){let t="",s="";for(const i of o){const{token:e,dialogue:a}=i,n=this.customPrefix?`${this.customPrefix}.`:"";t+=`"${e}": "{{i18n:${n}${e}}}",
`,s+=`"${n}${e}": "${a}",
`}this.contentText=t,this.i18nText=s},processDataWithSeparator(o){let t="",s="",i={},e="";for(const a of o){const{token:n,randomItems:l,dialogue:u}=a,c=this.customPrefix?`${this.customPrefix}.`:"";if(l){i[n]||(i[n]=0);const d=i[n]++;e+=`{{i18n:${c}${n}.${d}}} ${this.separator} `,s+=`"${c}${n}.${d}": "${l[0].trim()}",
`}else t+=`"${n}": "{{i18n:${c}${n}}}",
`,s+=`"${c}${n}": "${u}",
`,e&&(t+=`"${n}": "{{Random: ${e}}},
`,e="")}e&&(t+=`"${o[o.length-1].token}": "{{Random: ${e}}},`,t=t.slice(0,-6)+`|inputSeparator=${this.separator}}}",
`),this.contentText=t,this.i18nText=s},processMailData(o){let t=this.inputText,s="";const i=this.customPrefix?`${this.customPrefix}.`:"";for(const e of o){const{mailToken:a,mailTitle:n,mailText:l}=e;s+=`"${i}${a}.title": "${n}",
`,s+=`"${i}${a}.text": "${l}",
`,t=t.replace(l,`{{i18n:${i}${a}.text}}`),t=t.replace(n,`{{i18n:${i}${a}.title}}`)}this.contentText=t.trim()+`
`,this.i18nText=s.trim()},processData(){const o=this.inputText;if(!this.checkInput(o))return;const{cuts:s,separatorMatch:i,mailMatch:e}=this.cutString(o);i?this.processDataWithSeparator(s):e?this.processMailData(s):this.processDataWithoutSeparator(s)},copyToClipboard(o){document.getElementById(o).select(),document.execCommand("copy"),window.getSelection().removeAllRanges()}}},T={class:"input-page"},y=r("h2",{class:"page-header text-2xl mb-4"},"Dialogues",-1),R={class:"input-containers-wrapper"},k={class:"input-container left"},I={class:"input-container right"},b={class:"copy-button-placement"},C={class:"copy-button-placement"};function M(o,t,s,i,e,a){return f(),g("div",T,[y,r("div",R,[r("div",k,[p(r("textarea",{class:"input-field hide-scroll",placeholder:"Input entry",id:"input-data","onUpdate:modelValue":t[0]||(t[0]=n=>e.inputText=n)},null,512),[[h,e.inputText]]),p(r("input",{class:"prefix-field",type:"text",placeholder:"Custom Prefix","onUpdate:modelValue":t[1]||(t[1]=n=>e.customPrefix=n)},null,512),[[h,e.customPrefix]])]),r("div",I,[r("div",b,[p(r("textarea",{class:"input-field button-padding hide-scroll",placeholder:"Content.json",id:"content-field",readonly:"","onUpdate:modelValue":t[2]||(t[2]=n=>e.contentText=n)},null,512),[[h,e.contentText]]),r("img",{class:"copy-button",onClick:t[3]||(t[3]=n=>a.copyToClipboard("content-field")),src:m,alt:"Copy Content",title:"Copy"})]),r("div",C,[p(r("textarea",{class:"input-field button-padding hide-scroll",placeholder:"i18n",id:"i18n-field",readonly:"","onUpdate:modelValue":t[4]||(t[4]=n=>e.i18nText=n)},null,512),[[h,e.i18nText]]),r("img",{class:"copy-button",onClick:t[5]||(t[5]=n=>a.copyToClipboard("i18n-field")),src:m,alt:"Copy i18n",title:"Copy"})])])])])}const _=x($,[["render",M]]);export{_ as default};

import{_ as x,o as f,c as g,b as i,w as p,v as d}from"./index-da341614.js";const m="/sdv-i18nifier-app/assets/copy-icon-5887d2da.svg",y={data(){return{inputText:"",contentText:"",i18nText:"",customPrefix:"",separator:""}},methods:{async checkInput(n){const t=/\|inputSeparator/g,s=n.match(t),r=s?s.length:0,o=/"(.*?)":/g,a=n.match(o),e=a?a.length:0;return r>1?(this.contentText="Input only one line of random dialogue",this.i18nText="I'm too lazy to figure out a way for it to work... sorry",!1):r===1&&e>1?(this.contentText="Don't mix random and regular dialogue",this.i18nText="I'm too lazy to figure out a way for it to work... sorry",!1):!0},async cutString(n){const t=/\|inputSeparator=(..)/,s=n.match(t);return s?(this.separator=s[1],await this.cutStringWithSeparator(n)):await this.cutStringWithoutSeparator(n)},async cutStringWithSeparator(n){const s=/"(.*?)"/g.exec(n);if(!s)return console.error("Token not found."),{cuts:[],separatorMatch:!0};const r=s[1],o=new RegExp(`(?:Random: ?|${this.separator}|inputSeparator=${this.separator})(.*?)(?=(?:${this.separator}|\\||$))`,"g"),a=[];let e;for(;(e=o.exec(n))!==null;)a.push(e[1]);return{cuts:a.map(c=>{const u=c.split(this.separator).map(h=>h.trim());return{token:r,randomItems:u}}),separatorMatch:!0}},async cutStringWithoutSeparator(n){const t=/"([^"]+)":\s*"([^"]+)"/g,s=n.matchAll(t),r=[];for(const o of s){const a=o[1],e=o[2];r.push({token:a,dialogue:e})}return{cuts:r,separatorMatch:!1}},async processDataWithoutSeparator(n){let t="",s="";for(const r of n){const{token:o,dialogue:a}=r,e=this.customPrefix?`${this.customPrefix}.`:"";t+=`"${o}": "{{i18n:${e}${o}}}",
`,s+=`"${e}${o}": "${a}",
`}this.contentText=t,this.i18nText=s},async processDataWithSeparator(n){let t="",s="",r={},o="";for(const a of n)if(a.randomItems){const{token:e,randomItems:l}=a,c=this.customPrefix?`${this.customPrefix}.`:"";if(Array.isArray(l)&&l.length>0){r[e]||(r[e]=0);const u=r[e]++;o+=`{{i18n:${c}${e}.${u}}} ${this.separator} `,s+=`"${c}${e}.${u}": "${l[0].trim()}",
`}else console.error(`Random items not found for token "${e}"`)}else{const{token:e,dialogue:l}=a,c=this.customPrefix?`${this.customPrefix}.`:"";t+=`"${e}": "{{i18n:${c}${e}}}",
`,s+=`"${c}${e}": "${l}",
`,o&&(t+=`"${e}": "{{Random: ${o}}},
`,o="")}o&&(t+=`"${n[n.length-1].token}": "{{Random: ${o}}},
`,t=t.slice(0,-7)+`|inputSeparator=${this.separator}}},`),this.contentText=t,this.i18nText=s},async processData(){const n=this.inputText;if(!await this.checkInput(n))return;const{cuts:s,separatorMatch:r}=await this.cutString(n);r?await this.processDataWithSeparator(s):await this.processDataWithoutSeparator(s)},copyToClipboard(n){document.getElementById(n).select(),document.execCommand("copy"),window.getSelection().removeAllRanges()}}},$={class:"input-page"},T={class:"input-containers-wrapper"},k={class:"input-container left"},w={class:"input-container right"},v={class:"copy-button-placement"},S={class:"copy-button-placement"},I={class:"button-container"};function R(n,t,s,r,o,a){return f(),g("div",$,[i("div",T,[i("div",k,[p(i("textarea",{class:"input-field",placeholder:"Raw data",id:"raw-data","onUpdate:modelValue":t[0]||(t[0]=e=>o.inputText=e)},null,512),[[d,o.inputText]]),p(i("input",{class:"prefix-field",type:"text",placeholder:"Custom Prefix","onUpdate:modelValue":t[1]||(t[1]=e=>o.customPrefix=e)},null,512),[[d,o.customPrefix]])]),i("div",w,[i("div",v,[p(i("textarea",{class:"input-field button-padding",placeholder:"Content.json",id:"content-field",readonly:"","onUpdate:modelValue":t[2]||(t[2]=e=>o.contentText=e)},null,512),[[d,o.contentText]]),i("img",{class:"copy-button",onClick:t[3]||(t[3]=e=>a.copyToClipboard("content-field")),src:m,alt:"Copy Content"})]),i("div",S,[p(i("textarea",{class:"input-field button-padding",placeholder:"i18n",id:"i18n-field",readonly:"","onUpdate:modelValue":t[4]||(t[4]=e=>o.i18nText=e)},null,512),[[d,o.i18nText]]),i("img",{class:"copy-button",onClick:t[5]||(t[5]=e=>a.copyToClipboard("i18n-field")),src:m,alt:"Copy i18n"})])])]),i("div",I,[i("button",{class:"process-button",onClick:t[6]||(t[6]=(...e)=>a.processData&&a.processData(...e))},"Process Data")])])}const b=x(y,[["render",R]]);export{b as default};

import{P as l}from"./PageLayout-f92bb5ca.js";import{c as x}from"./scriptUtils-8ceee955.js";import{_ as k,r as h,o as f,g as d}from"./404-67355e5d.js";const g={components:{PageLayout:l},data(){return{inputText:"",contentText:"",i18nText:"",customToken:"",customImport:""}},computed:{ImportToken(){return this.customImport.length>0?`${this.customImport}`:"ImportToken"}},watch:{inputText:{handler(e){this.processData(e)}},customToken:{handler(){this.processData(this.inputText)}},customImport:{handler(){this.processData(this.inputText)}}},methods:{checkInput(e){const t=/"(.*?)":/g;return(e.match(t)||[]).length>1?(this.contentText="Only one event at a time.",this.i18nText="",!1):!0},findToken(e){const t=/"([^"\/]+)(?="|\/)/,n=e.match(t),o=this.customToken.trim().length===0?(n==null?void 0:n[1])??"":this.customToken;return x(o)},cutString(e){const t=/(?:(?:\/|\\\\|\r?\n|\s)speak|question|message|end dialogue|splitSpeak|textAboveHead|\(break\)speak)[^"]*"([^"]+)\\|(?:quickQuestion\s+|#)([^#()]+)/g,n=[];let o;for(;(o=t.exec(e))!==null;)o[1]!==void 0?n.push(o[1]):o[2]!==void 0&&n.push(o[2]);return n},processData(e){const t=this.inputText;if(!this.checkInput(t))return;const o=this.findToken(e),i=this.cutString(e);let u="",c=e;for(let s=0;s<i.length;s++){const r=i[s],m=`"${o}.${s}"`,p=`"${r}"`,T=`${r}`,a=this.dynamicTokenCheck(r);u+=`${m}: ${p},
`,c=c.replace(T,a?`{{i18n:${o}.${s} {{${this.ImportToken}}} }}`:`{{i18n:${o}.${s}}}`)}u.trim()!==""?this.contentText=c.trim()+`
`:this.contentText="",this.i18nText=u.trim()},dynamicTokenCheck(e){const t=/[^"]*({{[^}]*}})[^"]*/g;let n;return(n=t.exec(e))!==null&&n[0].length>4}}};function I(e,t,n,o,i,u){const c=h("PageLayout");return f(),d(c,{title:"Events",showCustomToken:"",showCustomImportToken:"",inputText:i.inputText,contentText:i.contentText,i18nText:i.i18nText,customToken:i.customToken,customImportToken:i.customImport,"onUpdate:inputText":t[0]||(t[0]=s=>i.inputText=s),"onUpdate:customToken":t[1]||(t[1]=s=>i.customToken=s),"onUpdate:customImportToken":t[2]||(t[2]=s=>i.customImport=s)},null,8,["inputText","contentText","i18nText","customToken","customImportToken"])}const v=k(g,[["render",I]]);export{v as default};

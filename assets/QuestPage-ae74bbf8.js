import{P as a}from"./PageLayout-08e6b369.js";import{_ as T,r as x,o as p,g as h}from"./index-0b1af69f.js";const k={components:{PageLayout:a},data(){return{inputText:"",contentText:"",i18nText:"",customToken:""}},watch:{inputText:{handler(o){this.processData(o)}},customToken:{handler(){this.processData(this.inputText)}}},methods:{checkInput(o){const e=/"([^"]+)":\s*"((?:\\"|[^"])*)"/g,t=(o.match(e)||[]).length;return t>1?(this.contentText="Only one quest at a time.",this.i18nText="",!1):t<1?(this.contentText="Invalid input",this.i18nText="",!1):!0},extractQuestInfo(o){const e=o.split("/"),t=/"(.*?)":/g;if(e.length>=5){const n=e[1],s=e[2],c=e[3];let i=e[9]||null;const r=/(?:", *|" *)/g;i&&(i=i.replace(r,""));let u=null;if(this.customToken.trim().length===0){const l=t.exec(o);l&&l[1]&&(u=l[1])}else u=this.customToken;return{token:u,title:n,questDetails:s,hint:c,reactionText:i}}return null},processData(o){if(!this.checkInput(o))return;const t=this.extractQuestInfo(o);if(t){let n=o;n=n.replace(t.title,`{{i18n:${t.token}.title}}`),n=n.replace(t.questDetails,`{{i18n:${t.token}.text}}`),n=n.replace(t.hint,`{{i18n:${t.token}.objective}}`);let s=`"${t.token}.title": "${t.title}",
"${t.token}.text": "${t.questDetails}",
"${t.token}.objective": "${t.hint}",
`;if(t.reactionText&&t.reactionText.trim()!==""){const c=t.reactionText.replace(/(\r\n|\n|\r)/gm,"");n=n.replace(c,`{{i18n:${t.token}.reaction}}`),s+=`"${t.token}.reaction": "${c}",`}else this.i18nText="";this.contentText=n,this.i18nText=s}else this.contentText="Invalid input format",this.i18nText=""}}};function m(o,e,t,n,s,c){const i=x("PageLayout");return p(),h(i,{title:"Quests",showCustomToken:"",inputText:s.inputText,contentText:s.contentText,i18nText:s.i18nText,customToken:s.customToken,"onUpdate:inputText":e[0]||(e[0]=r=>s.inputText=r),"onUpdate:customToken":e[1]||(e[1]=r=>s.customToken=r)},null,8,["inputText","contentText","i18nText","customToken"])}const I=T(k,[["render",m]]);export{I as default};

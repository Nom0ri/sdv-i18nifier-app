import{P as T}from"./PageLayout-26497d4e.js";import{c as a}from"./scriptUtils-8ceee955.js";import{_ as x,r as p,o as h,g as k}from"./404-47134ce0.js";const m={components:{PageLayout:T},data(){return{inputText:"",contentText:"",i18nText:"",customToken:""}},watch:{inputText:{handler(o){this.processData(o)}},customToken:{handler(){this.processData(this.inputText)}}},methods:{checkInput(o){const e=/"([^"]+)":\s*"((?:\\"|[^"])*)"/g,t=(o.match(e)||[]).length;return t>1?(this.contentText="Only one quest at a time.",this.i18nText="",!1):t<1?(this.contentText="Invalid input",this.i18nText="",!1):!0},extractQuestInfo(o){const e=o.split("/"),t=/"(.*?)":/g;if(e.length>=5){const n=e[1],s=e[2],c=e[3];let i=e[9]||null;const r=/(?:", *|" *)/g;i&&(i=i.replace(r,""));let l=null;if(this.customToken.trim().length===0){const u=t.exec(o);u&&u[1]&&(l=a(u[1]))}else l=a(this.customToken);return{token:l,title:n,questDetails:s,hint:c,reactionText:i}}return null},processData(o){if(!this.checkInput(o))return;const t=this.extractQuestInfo(o);if(t){let n=o;n=n.replace(t.title,`{{i18n:${t.token}.title}}`),n=n.replace(t.questDetails,`{{i18n:${t.token}.text}}`),n=n.replace(t.hint,`{{i18n:${t.token}.objective}}`);let s=`"${t.token}.title": "${t.title}",
"${t.token}.text": "${t.questDetails}",
"${t.token}.objective": "${t.hint}",
`;if(t.reactionText&&t.reactionText.trim()!==""){const c=t.reactionText.replace(/(\r\n|\n|\r)/gm,"");n=n.replace(c,`{{i18n:${t.token}.reaction}}`),s+=`"${t.token}.reaction": "${c}",`}else this.i18nText="";this.contentText=n,this.i18nText=s}else this.contentText="Invalid input format",this.i18nText=""}}};function f(o,e,t,n,s,c){const i=p("PageLayout");return h(),k(i,{title:"Quests",showCustomToken:"",inputText:s.inputText,contentText:s.contentText,i18nText:s.i18nText,customToken:s.customToken,"onUpdate:inputText":e[0]||(e[0]=r=>s.inputText=r),"onUpdate:customToken":e[1]||(e[1]=r=>s.customToken=r)},null,8,["inputText","contentText","i18nText","customToken"])}const d=x(m,[["render",f]]);export{d as default};
